var express = require('express');
var bodyParser = require('body-parser');
var socket = require('./routes/module/mod_socket.js');

var Sequelize = require('sequelize');
var Seq = new Sequelize('t01test', 'dbs00', 'dbsys00',{
  host: 'localhost',
  port: 3306
});
var t000mcl = Seq.define('t000cml', {
	PAGE_ID : Sequelize.STRING,
	PAGE_GROUP : Sequelize.STRING,
	OP_STATUS : Sequelize.STRING,
	CL_TIME_FROM : Sequelize.DATE,
	CL_TIME_TO : Sequelize.DATE,
	INS_DATE : Sequelize.DATE,
	INS_ID : Sequelize.STRING,
	UPD_DATE : Sequelize.DATE,
	UPD_ID : Sequelize.STRING
});
User.find({ where: {PAGE_ID: 'P0001'} })
.error(function(err) {
      //エラー時の処理
      console.log(err);
})
.success(function(result) {
      //成功時の処理
      //console.log(result)
      console.log(result.OP_STATUS);
});

// express の実態 Application を生成
var app = express();

// POSTのために必要
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));

// テンプレートエンジンを EJS に設定
app.set('views', './views');
app.set('view engine', 'ejs');

// 静的ファイルは無条件に公開
app.use('/public', express.static('public'));

// ルーティング設定
app.use('/', require('./routes/index.js'));

// サーバーをポート 3000 で起動
app.listen(3000);

// アプリケーション開始ログ
console.log('Server running at http://localhost:3000');