var express = require('express');
var router = express.Router();


// デフォルトルーティング

router.get('/', function (request, response) {
	var t000mcl = require('./module/mod_db_t000mcl').t000mcl;
	t000mcl.find({
		where: {PAGE_ID: "00001"}
	}).success(function(t000mcl){
		if (t000mcl.OP_STATUS == '1') {
			response.render('index', { title: 'Sample Node.js', message: 'Closed!' });
		} else {
			response.render('index', { title: 'Sample Node.js', message: 'Chat Room!' });
		}
	})

});


router.post('/game', function (request, response) {
	if (request.body.checkFlg == 'false') {
		response.render('missBoard', { title: 'Sample Node.js', message: '駒の数か位置がおかしいぞ！!', img: request.body.image.split(",") });
	} else {
		response.render('game', { title: 'Sample Node.js', message: 'New game!', img: request.body.image.split(",") });
	}
	//next();
});
/*
router.post('/game', function (request, response) {
	console.log("駒チェックsoto");
	console.log(request.body.checkFlg);
	if (request.body.checkFlg == 'false') {
		console.log("駒チェック");
		response.render('index', { title: 'Sample Node.js', message: '駒の数がおかしいぞ！!', img: request.body.image.split(",") });
	}
});
*/

module.exports = router;